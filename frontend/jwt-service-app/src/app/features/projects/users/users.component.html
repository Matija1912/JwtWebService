<div class="search-bar">
  <input type="text" [(ngModel)]="searchEmail" placeholder="Search by email..." />
  <button class="ghost-btn" (click)="searchUser()">Search</button>
  <button class="ghost-btn" (click)="clear()">Clear</button>
</div>

<section class="user-details" *ngIf="selectedUser">
  <h3>User details</h3>
  <p><strong>Email:</strong> {{ selectedUser.email }}</p>
  <p><strong>Joined:</strong> {{ selectedUser.created_at | date:'medium' }}</p>

  <div class="custom-fields" *ngIf="selectedUser.custom_fields">
    <h4>Custom fields:</h4>
    <ul>
      <li *ngFor="let entry of (selectedUser.custom_fields | keyvalue)">
        <strong>{{ entry.key }}:</strong> {{ entry.value }}
      </li>
    </ul>
  </div>
</section>

<section class="users-section">
  <div class="users-list">
    <div *ngFor="let user of users" class="user-card">
      <a class="user-link" (click)="toggleUserDetails(user)">{{ user.email }}</a>
      <p class="date">Joined: {{ user.created_at | date:'dd.MM.yyyy | hh:mm' }}</p>
    </div>
  </div>

  <app-pagination
    [totalCount]="totalCount"
    [limit]="pageSize"
    [currentPage]="page"
    (changePage)="onPageChange($event)">
  </app-pagination>
</section>
